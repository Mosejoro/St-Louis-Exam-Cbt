<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Online Examination System</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="examv1.css" />
    <!-- <script>
      const redirectTo = "Not.html";
      window.location.href = redirectTo;
    </script> -->
  </head>
  <body>
    <div class="powered-by-bina-floating">
      <span>Powered by</span>
      <img src="Bina Pry.png" alt="BINA Logo" />
    </div>
    <div class="container">
      <div class="header">
        <img src="Bida2.png" /><br />
        <h1>St Louis Bida Exam Portal</h1>
        <h3>
          Pick the Day <br /><br />
          And then Pick the Subject of that day <br /><br />
        </h3>
      </div>

      <div class="selection-form">
        <div class="form-group">
          <label for="day">Select Day:</label>
          <select id="day" class="form-control" disabled>
            <option value="Day1">Monday</option>
            <option value="Day2">Tuesday</option>
            <option value="Day3">Wednesday</option>
            <option value="Day4">Thursday</option>
            <option value="Day5">Friday</option>
          </select>
        </div>

        <div class="form-group">
          <label for="class">Select Class:</label>
          <select id="class" class="form-control">
            <!-- <option value="P1">Primary 1</option>
            <option value="P2">Primary 2</option>
            <option value="P3">Primary 3</option>
            <option value="P4">Primary 4</option>
            <option value="P5">Primary 5</option> -->
            <option value="P6">Primary 6</option>
          </select>
        </div>

        <div class="form-group">
          <label for="subject">Select Subject:</label>
          <select id="subject" class="form-control"></select>
        </div>

        <button onclick="startExam()" class="btn btn-primary btn-block">
          Start Exam
        </button>
      </div>
      <!-- <a class="make-up" href="Make Up.html">Go to make up exam</a> -->
    </div>

    <script>
      const timetable = {
        Day1: {
          P1: ["PHE", "Mathematics"],
          P2: ["PHE", "Mathematics"],
          P3: ["PHE", "Mathematics"],
          P4: ["PHE", "Mathematics"],
          P5: ["PHE", "Mathematics"],
          P6: ["English_Exam",, "General_Studies_Exam"],
        },
        Day2: {
          P1: ["Basic_Science", "CRK"],
          P2: ["Basic_Science","CRK"],
          P3: ["Basic_Science","CRK"],
          P4: ["Basic_Science", "CRK"],
          P5: ["Basic_Science", "CRK"],
          P6: ["English_Exam",],
        },
        Day3: {
          P1: ["CCA", "English"],
          P2: ["CCA", "English"],
          P3: ["CCA", "English"],
          P4: ["English", "CCA", "French"],
          P5: ["English", "CCA", "French"],
          P6: ["Math_Exam"],
        },
        Day4: {
          P1: ["Social_Studies", "History"],
          P2: ["Social_Studies", "History"],
          P3: ["Social_Studies", "History"],
          P4: ["Social_Studies", "History", "Hausa"],
          P5: ["Social_Studies", "History", "Hausa"],
          P6: [ "Math_Exam",],
        },
        Day5: {
          // P1: ["Mathematics"],
          // P2: ["Mathematics"],
          // P3: ["Mathematics"],
          P4: ["Digital", "Prevocational_Studies"],
          P5: ["Digital", "Prevocational_Studies"],
          P6: ["Digital", "Prevocational_Studies"],
        },
      };

      function getAndSetCurrentDay() {
        const today = new Date();
        const dayOfWeek = today.getDay(); // 0 = Sunday, 1 = Monday, etc.

        // Map JavaScript day numbers to exam days
        // Sunday (0) and Saturday (6) map to Friday for weekend fallback
        const dayMap = {
          0: "Day5", // Sunday -> Friday
          1: "Day1", // Monday
          2: "Day2", // Tuesday
          3: "Day3", // Wednesday
          4: "Day4", // Thursday
          5: "Day5", // Friday
          6: "Day5", // Saturday -> Friday
        };

        const currentExamDay = dayMap[dayOfWeek];
        document.getElementById("day").value = currentExamDay;
        updateSubjects();
      }

      document.getElementById("day").addEventListener("change", updateSubjects);
      document
        .getElementById("class")
        .addEventListener("change", updateSubjects);

      function updateSubjects() {
        let day = document.getElementById("day").value;
        let cls = document.getElementById("class").value;
        let subjectsDropdown = document.getElementById("subject");

        subjectsDropdown.innerHTML = "";

        if (timetable[day] && timetable[day][cls]) {
          timetable[day][cls].forEach((subject) => {
            let option = document.createElement("option");
            option.value = subject;
            option.textContent = subject.replace(/_/g, " ");
            subjectsDropdown.appendChild(option);
          });
        }
      }

      function startExam() {
        const day = document.getElementById("day").value;
        const cls = document.getElementById("class").value;
        const subject = document.getElementById("subject").value;

        if (!subject) {
          alert("Please select a subject.");
          return;
        }

        // Store selections in localStorage
        localStorage.setItem("examDay", day);
        localStorage.setItem("examClass", cls);
        localStorage.setItem("examSubject", subject);

        // Redirect to questions page
        window.location.href = "questions.html";
      }

      document.addEventListener("DOMContentLoaded", function () {
        getAndSetCurrentDay();
      });
    </script>
  </body>
</html>
